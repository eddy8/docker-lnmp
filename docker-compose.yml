version: "3"
services:
    nginx:
        build:
            context: ./nginx
        ports:
            - "${NGINX_PORT}:80"
        volumes:
            - ${DATA_ROOT}/nginx/logs:/logs
            - ${DATA_ROOT}/nginx/vhosts:/etc/nginx/vhosts
            - ${DATA_ROOT}/www:/www
        restart: always
    mysql:
        build:
            context: ./mysql
        # image: mysql:5.7
        ports:
            - "${MYSQL_PORT}:3306"
        command: --default-authentication-plugin=mysql_native_password
        volumes:
            - ${DATA_ROOT}/mysql:/var/lib/mysql
        restart: always
        environment:
            MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}